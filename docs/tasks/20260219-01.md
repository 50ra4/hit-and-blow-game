# デザイン改善タスク一覧

元レポート: `recommend-comment.md`
対象ファイル: `docs/06_mock_design.html`
作成日: 2026-02-18

---

## 優先度：高

### ゲームUX

- [x] **#1 推測エリアに空スロットを表示する**（1-1）
  - ゲーム開始時から桁数分の空スロット `[_][_][_][_]` を常に表示する
  - タイルを選ぶたびに左から順にスロットが埋まる UI に変更する
  - 対象: `.current-guess` の `.tiles-row` 内

- [x] **#2 推測エリアのタイルを個別に取り消せるようにする**（1-2）
  - 推測エリアのタイルをクリック/タップするとそのタイルだけ削除できるようにする
  - 対象: `.current-guess` 内の各タイル要素にクリックイベントを追加

- [x] **#3 重複なしモードで選択済みタイルをグレーアウトする**（1-3）
  - 推測エリアに追加済みのタイルをパレット側でグレーアウト（無効化）表示する
  - 対象: `.tile-palette` 内の各タイル — 選択済みの場合に `disabled` クラス等を付与

### 情報設計

- [x] **#4 デイリーチャレンジカードに残り時間を表示する**（2-1）
  - ホーム画面の「今日の問題」カードに次のリセットまでの残り時間を表示する
  - 例: 「23:45:00 後にリセット」
  - 対象: `.daily-challenge` の `.daily-description` に残り時間行を追加

- [x] **#5 チュートリアルのステップページングを実装する**（2-2）
  - 全ステップが1画面に並んでいる状態を1ステップずつ表示する形に変更する
  - ドットインジケーター（●●●）を現在のステップと連動させる
  - 最終ステップの「次へ」→「ゲームを始める」に変更してホームへ遷移する
  - 対象: `#tutorialScreen` 内の `.tutorial-step` と `.step-indicator`

- [x] **#6 敗北結果画面にシェアボタンを追加する**（2-3）
  - 勝利画面にある X / LINE / Threads のシェアセクションを敗北画面にも追加する
  - シェアテキストは敗北用に調整する（例: 「惜しかった！次こそクリアするぞ」）
  - 対象: `#resultLoseScreen` に `.share-section` を追加

- [x] **#7 デイリーチャレンジ結果画面の「もう一度プレイ」を適切に対応する**（2-4）
  - デイリーから遷移した結果画面では「もう一度プレイ」を無効化し「フリープレイで遊ぶ」などに変更する
  - 対象: `showScreen()` の呼び出し元（daily/freeplay）を記録してボタンラベル・遷移先を切り替える

### アクセシビリティ

- [x] **#8 タイルにキーボード操作・ARIA属性を追加する**（3-1）
  - `<div>` を `<button>` 要素に変更する（推奨）、または `role="button" tabindex="0"` と `keydown`（Enter/Space）ハンドラを追加する
  - 対象: `.tile-palette` 内のタイル、`.current-guess` 内のタイル

- [x] **#9 設定モーダルのトグルスイッチにARIA属性を追加する**（3-2）
  - `role="switch"`、`aria-checked="true/false"`（ON/OFF で動的切り替え）、`tabindex="0"` を追加する
  - Enter/Space によるキーボードトグル操作を追加する
  - 対象: `#settingsModal` 内の `.toggle-switch`

- [x] **#11 デイリーカレンダーに色以外の勝敗表示を追加する**（3-3）
  - 勝利=緑・敗北=赤の色のみの区別に加え ○/✕ アイコンや「W」「L」を日付とともに表示する
  - 対象: `.daily-cell.win` / `.daily-cell.lose`

- [x] **#10 設定モーダルのフォーカストラップを実装する**（3-4）
  - モーダルを開いたとき → モーダル内の最初のフォーカス可能要素にフォーカスを移す
  - Tab キーでモーダル内のみを循環させる（フォーカストラップ）
  - モーダルを閉じたとき → 設定ボタン（`#settingsBtn`）にフォーカスを戻す
  - 対象: `closeSettings()` / 設定ボタンのクリックハンドラ

- [x] **#12 テキストコントラスト比を改善する**（3-5）
  - 暗い背景に対してコントラスト比が不十分な色を修正する（目標: WCAG AA 4.5:1 以上）

  | 要素            | 現在の色  | 対応方針                 |
  | --------------- | --------- | ------------------------ |
  | `.stats-label`  | `#888`    | `#aaa` 以上に変更 ✓      |
  | `.footer-text`  | `#666`    | `#999` 以上に変更 ✓      |
  | `.mode-details` | `#b0b0b0` | 確認の上調整（変更不要） |

---

## 優先度：中

### ナビゲーション

- [x] **#13 戻るボタンとESCキーのナビゲーション階層を修正する**（4-1, 4-2）
  - 結果画面からの戻るボタン → フリープレイ画面へ戻る
  - ゲームプレイ中の戻るボタン・ESCキー → 「ゲームを終了しますか？」確認ダイアログを表示してからホームへ
  - 対象: `showScreen()` 関数、`#backBtn` のイベントハンドラ、`keydown` の ESC ハンドラ

### ビジュアルデザイン

- [x] **#14 インラインスタイルをクラスに整理・HTMLエンティティ修正・テーマ設定修正**（5-1, 5-2, 5-3）
  - インラインスタイルをCSSクラスに移動する
    - `style="grid-column: 1 / -1;"` → `.progress-full-width` クラス等
    - `style="color: #667eea;"` → `.arrow-link` 等
    - `style="margin-bottom: 1rem; font-size: 1.2rem;"` → クラスに
  - `Tile H&B` → `Tile H&amp;B` にエスケープする
  - 設定モーダルのデフォルトテーマを「ライト」→「ダーク」に修正する

### モバイル対応

- [x] **#15 モバイルのタッチターゲットと統計カードレイアウトを改善する**（6-1, 6-2）
  - モバイル時のタイルサイズを最低 44×44px 確保する
  - ホーム画面の `.stats-summary` がモバイルで1列縦並びになっている問題を修正する（`repeat(3, 1fr)` 維持 or 2+1 レイアウト検討）

---

## 優先度：低

### コンテンツ・コピー

- [x] **#16 コンテンツ・コピーの細かな修正**（7-1, 7-2, 7-3）
  - 設定モーダルの「デイリーチャレンジ通知」説明文から `（Phase 2で実装予定）` を削除する
  - デイリーカレンダーのサンプルデータを2024年から2026年相当に更新する
  - デイリーカレンダーの上部に月ヘッダー（例: 「2026年2月」）を追加する
