# 要件定義書 - ヒットアンドブローゲーム

## 1. プロジェクト概要

### 1.1 プロジェクト名

**シンボルヒットアンドブロー**（仮称）

### 1.2 目的

- シンボル（アイコン）を使った推理ゲームをWebブラウザ・LINEアプリ・モバイルアプリで提供
- SNSシェア機能により拡散を促進
- Google AdSenseによる広告収益化

### 1.3 ターゲットユーザー

- カジュアルゲームを楽しみたい全年齢層
- 隙間時間に遊べるパズルゲームを求めるユーザー
- SNSでスコアをシェアして楽しみたいユーザー

## 2. 機能要件

### 2.1 ゲームルール

#### 基本ルール

- コンピュータがランダムに選んだシンボルの並びを推理するゲーム
- プレイヤーはシンボルの並びを予想して入力
- 結果は「ヒット」と「ブロー」で表示
  - **ヒット**：シンボルと位置が両方正解
  - **ブロー**：シンボルは正解だが位置が違う

#### シンボル仕様

- **種類**：8種類のSVGアイコン
- **デザイン**：各シンボルは固有の色を持つ
- **候補例**：★（黄）、●（赤）、▲（青）、■（緑）、◆（紫）、♠（黒）、♥（ピンク）、♣（オレンジ）

### 2.2 ゲームモード

| モード           | 桁数 | 重複 | 回答回数 | 解放条件                   |
| ---------------- | ---- | ---- | -------- | -------------------------- |
| **ビギナー**     | 3桁  | なし | 6回      | 最初から利用可能           |
| **ノーマル**     | 4桁  | なし | 8回      | 最初から利用可能           |
| **ハード**       | 4桁  | あり | 10回     | 最初から利用可能           |
| **エキスパート** | 8桁  | なし | 12回     | ノーマルクリア後に解放     |
| **マスター**     | 8桁  | あり | 15回     | エキスパートクリア後に解放 |

#### モード解放の表示

- 未解放モードは「🔒 ノーマルをクリアで解放」のように条件を明示
- 解放時にはアニメーション・通知で達成感を演出

### 2.3 プレイタイプ

#### フリープレイ

- 毎回ランダムな問題
- 何度でもプレイ可能
- 統計情報に記録される

#### 今日の問題（デイリーチャレンジ）

- 全プレイヤー共通の日替わり問題
- 日付をシード値とした疑似乱数生成で実装
- 1日1回のみプレイ可能
- SNSシェアで拡散効果を狙う

### 2.4 チュートリアル機能

#### インタラクティブチュートリアル

- 初回起動時に自動表示（スキップ可能）
- 3桁・3回の簡易版ゲームをプレイしながら学習
- ステップ構成：
  1. ルール説明（ヒット・ブローとは）
  2. シンボル選択の練習
  3. 実際にプレイ（ヒント付き）
  4. 結果の見方を解説
- 再度見たい場合はメニューから呼び出し可能

### 2.5 統計・記録機能

#### 保存場所

- localStorage（ブラウザローカル保存）
- サーバー不要

#### 記録内容

- **全体統計**
  - 総プレイ回数
  - 総クリア回数
  - クリア率
  - 平均クリア回数
  - 最短クリア回数
- **モード別統計**
  - 各モードのプレイ回数・クリア回数
  - モード解放状況
- **デイリーチャレンジ履歴**
  - 過去7日分のクリア状況

### 2.6 シェア機能

#### シェア内容

- テキスト情報
  - 「シンボルヒットアンドブロー【ノーマル】を5回でクリア！」
  - ハッシュタグ：#シンボルヒットアンドブロー #ヒットアンドブロー #パズルゲーム
  - ゲームURL
- 画像生成
  - Canvas APIまたはhtml2canvasを使用
  - ゲーム結果画面のスクリーンショット風画像
  - プレイ履歴を視覚的に表示（例：🟢🟢⚫⚫ 2H2B）

#### 対応SNS

- X（Twitter）
- LINE
- Threads
- その他（Web Share API経由）

### 2.7 広告機能

#### Google AdSense統合

- **表示タイミング**：ゲーム終了後
- **配置**：結果画面の下部に固定表示
- **種類**：バナー広告（レスポンシブ）

## 3. 非機能要件

### 3.1 対応環境

#### Webブラウザ

- Chrome / Firefox / Safari / Edge（最新版＋1世代前）
- レスポンシブデザイン（スマホ・タブレット・PC対応）

#### LINEアプリ

- LINE Liff（LINE内ブラウザ）
- LINE Developersでアプリ登録

#### モバイルアプリ

- iOS（Safari WebView）
- Android（Chrome WebView）
- PWA（Progressive Web App）として実装

### 3.2 パフォーマンス

- 初回ロード時間：3秒以内
- 操作レスポンス：即座（100ms以内）

### 3.3 セキュリティ

- 個人情報の収集なし
- 認証機能不要
- localStorageのみ使用

### 3.4 保守性

- コードは TypeScript で型安全に実装
- コンポーネント単位で分割
- 将来的な機能追加を考慮した設計

## 4. 技術スタック

### 4.1 フロントエンド

- **フレームワーク**：React.js 19
- **言語**：TypeScript
- **ビルドツール**：Vite
- **スタイリング**：Tailwind CSS
- **アイコン**：SVG（カスタムまたはHeroicons / Lucide React）

### 4.2 ホスティング

- **GitHub Pages**：静的サイトホスティング（無料）
- **GitHub Actions**：自動デプロイ

### 4.3 外部サービス

- **Google AdSense**：広告配信
- **LINE Developers**：LINE Liff対応
- **Web Share API**：SNSシェア機能

### 4.4 開発ツール

- Git / GitHub
- ESLint / Prettier
- Claude Code（実装支援）

## 5. 制約事項

### 5.1 予算

- 月額費用：1,000円以内
- GitHub Pages：無料
- Google AdSense：無料
- LINE Developers：無料プランで対応

### 5.2 開発期間

- 個人開発を前提
- 段階的リリースを想定

#### Phase 1：Web版 + LINE Liff対応

- Webブラウザ版（フリープレイ + デイリーチャレンジ）
- LINE Liff対応
- 全ゲームモード実装
- チュートリアル
- SNSシェア機能（テキスト + 画像）
- Google AdSense統合
- 統計・記録機能

#### Phase 2：PWA化・モバイル最適化

- PWA対応（オフライン動作、ホーム画面追加）
- モバイルUX最適化
- パフォーマンスチューニング

#### Phase 3：ネイティブアプリ対応

- iOS版（React Native / Capacitor / Cordova）
- Android版（React Native / Capacitor / Cordova）
- App Store / Google Play ストア公開

## 6. 成功指標

### 6.1 KPI

- DAU（デイリーアクティブユーザー）：100人/日（3ヶ月後）
- SNSシェア数：10回/日
- デイリーチャレンジ参加率：30%以上

### 6.2 収益目標

- Google AdSense収益：月1,000円以上（半年後）

## 7. 今後の拡張案（将来検討）

- マルチプレイヤー対戦モード
- ランキング機能（サーバー必要）
- 実績・バッジシステム
- カスタムシンボルセット
- 音声・効果音の追加
- アニメーション強化
- 多言語対応

---

**作成日**：2025年1月
**バージョン**：1.1
